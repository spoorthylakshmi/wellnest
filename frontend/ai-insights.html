<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>WellNest | AI Insights</title>
  <link rel="stylesheet" href="style.css">
  <style>
     .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #ffffffc9;
      padding: 1rem 2rem;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 1000;
      backdrop-filter: blur(8px);
    }

    .logo {
      font-size: 1.7rem;
      color: var(--primary);
      font-weight: 700;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .logo-svg {
      width: 40px;
      height: 40px;
    }

    nav ul { list-style: none; display: flex; gap: 1.5rem; margin: 0; padding: 0; }

    nav a {
      text-decoration: none;
      color: #334155;
      font-weight: 600;
      padding: 0.45rem 0.75rem;
      border-radius: 8px;
      transition: color 0.18s ease, background 0.18s ease, transform 0.12s ease;
      font-size: 0.95rem;
    }

    nav a:hover {
      color: #ffffff;
      background: #2e7d32;
      transform: translateY(-2px);
    }

    nav a.active { background: linear-gradient(90deg,#2e7d32,#81c784); color: #fff; }

    :root{--primary:#2e7d32;--muted:#6b7280;--bg:#f8faf7}
    body{font-family:'Segoe UI',system-ui,-apple-system,sans-serif;background:var(--bg);color:#0b1220;margin:0}
    .navbar{background:#fff;padding:1rem 2rem;box-shadow:0 2px 8px rgba(2,6,23,0.06);display:flex;justify-content:space-between;align-items:center}
    .logo{color:var(--primary);font-weight:700}
    .content{max-width:900px;margin:2.5rem auto;padding:2rem;background:#fff;border-radius:12px;box-shadow:0 12px 30px rgba(2,6,23,0.06)}
    h2{color:var(--primary);margin-bottom:.5rem}
    .insight-card{background:linear-gradient(180deg,rgba(46,125,50,0.03),transparent);padding:1rem;border-radius:10px;border-left:4px solid var(--primary);margin-top:1rem}
    .insight-item{padding:.6rem 0;border-bottom:1px dashed rgba(0,0,0,0.04)}
    .insight-item:last-child{border-bottom:none}
    .button{background:var(--primary);color:#fff;padding:.7rem 1.1rem;border-radius:8px;border:none;font-weight:600;cursor:pointer}
  </style>

  <!-- Dark-theme overrides (keeps styling consistent with frontend/style.css dark theme) -->
  <style>
  [data-preferred-theme="dark"] body {
    background: linear-gradient(135deg,#071016,#0b1720);
    color: #d7e7e3;
  }
  [data-preferred-theme="dark"] .navbar {
    background: rgba(10,14,18,0.75);
    box-shadow: 0 2px 10px rgba(0,0,0,0.6);
  }
  [data-preferred-theme="dark"] .logo { color: #86e0b8 }
  [data-preferred-theme="dark"] nav a { color: #cfeee0 }
  [data-preferred-theme="dark"] nav a:hover { background: rgba(134,224,184,0.12); color: #fff }
  [data-preferred-theme="dark"] .content,
  [data-preferred-theme="dark"] .insight-card {
    background: rgba(12,18,22,0.6);
    color: #d7e7e3;
    box-shadow: 0 8px 24px rgba(0,0,0,0.6);
    border-color: rgba(255,255,255,0.04);
  }
  [data-preferred-theme="dark"] .button { background: linear-gradient(90deg,#2aa77a,#57c69a); color:#03110b }
  </style>

</head>
<body>
   <header class="navbar">
    <h1 class="logo">
      <svg class="logo-svg" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
        <path d="M50 5C25.2 5 5 25.2 5 50s20.2 45 45 45 45-20.2 45-45S74.8 5 50 5zm0 80c-19.9 0-36-16.1-36-36s16.1-36 36-36 36 16.1 36 36-16.1 36-36 36z" fill="currentColor"/>
        <path d="M65 35c-4.4 0-8.3 2.3-10.5 5.7C52.3 37.3 48.4 35 44 35c-7.2 0-13 5.8-13 13 0 11.4 18.5 22 19 22s19-10.6 19-22c0-7.2-5.8-13-13-13zm-21 13c0-3.9 3.1-7 7-7s7 3.1 7 7h-14zm21 0h-14c0-3.9 3.1-7 7-7s7 3.1 7 7z" fill="currentColor"/>
      </svg>
      WellNest ðŸŒ¿
    </h1>
    <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="dashboard.html">Dashboard</a></li>
        <li><a href="journal.html">Journal</a></li>
        <li><a href="ai-insights.html">AI Insights</a></li>
        <li><a href="profile.html">Profile</a></li>
      </ul>
    </nav>
    <!-- Theme toggle -->
    <button id="theme-toggle" aria-label="Toggle theme" style="background:transparent;border:none;font-size:1.2rem;cursor:pointer;padding:8px;margin-left:12px">ðŸŒ™</button>
  </header>
  <div class="content">
    <h2>AI Insights</h2>
    <p>Personalized tips, trends, and suggestions from our AI engine.</p>
    <div id="insights" style="margin-top:12px;"></div>
    <div style="margin-top:18px; display:flex; gap:1rem;">
      <a class="button" href="index.html">Back to Home</a>
      <a class="button" href="journal.html">Open Journal</a>
    </div>
    <script>
      (function(){
        const insights = document.getElementById('insights');
        const current = localStorage.getItem('wellnest_current_user');
        if(!current){ insights.innerHTML = '<p>Please log in to view personalized insights.</p>'; return; }
        const journals = JSON.parse(localStorage.getItem('wellnest_journals_'+current)||'[]');
        if(journals.length===0){ insights.innerHTML = '<p>No journal data yet. Add entries to get insights.</p>'; return; }
        // Simple mood average
        const moods = journals.map(j=> Number(j.mood)||NaN).filter(n=>!isNaN(n));
        const avgMood = moods.length? (moods.reduce((a,b)=>a+b,0)/moods.length).toFixed(1): 'N/A';
        // Tiny sentiment: count positive words vs negative words
        const pos = ['good','great','happy','relaxed','calm','better','productive','excited','hopeful'];
        const neg = ['sad','anxious','stress','stressed','tired','bad','angry','upset','depressed'];
        let posCount=0, negCount=0;
        journals.forEach(j=>{
          const text = (j.text||'').toLowerCase();
          pos.forEach(w=>{ if(text.includes(w)) posCount++; });
          neg.forEach(w=>{ if(text.includes(w)) negCount++; });
        });
        insights.innerHTML = '<p><strong>Average mood:</strong> '+avgMood+'</p>' +
          '<p><strong>Sentiment signals:</strong> positive('+posCount+') / negative('+negCount+')</p>' +
          '<p>Quick tip: Try breathing exercises when negative signals are high. Write regularly to get better insights.</p>';
      })();
    </script>
  </div>

<!-- Theme script: remembers preference and respects system preference -->
<script>
  (function(){
    const root = document.documentElement;
    const toggle = document.getElementById('theme-toggle');
    const stored = localStorage.getItem('preferred-theme');
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    const current = stored || (prefersDark ? 'dark' : 'light');
    root.setAttribute('data-preferred-theme', current);
    function updateToggle(){ if(!toggle) return; toggle.textContent = root.getAttribute('data-preferred-theme') === 'dark' ? 'ðŸŒ™' : 'â˜€ï¸'; toggle.classList.toggle('is-dark', root.getAttribute('data-preferred-theme') === 'dark'); }
    if(toggle){ toggle.addEventListener('click', ()=>{ const next = root.getAttribute('data-preferred-theme') === 'dark' ? 'light' : 'dark'; root.setAttribute('data-preferred-theme', next); localStorage.setItem('preferred-theme', next); updateToggle(); }); }
    updateToggle();
  })();
</script>
</body>
</html>
