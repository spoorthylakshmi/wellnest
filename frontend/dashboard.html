<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Interactive Wellness Tracker</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background: #f5f7fa;
      margin: 30px;
    }
    h1 {
      margin-top: 5%;
      text-align: center;
    }
    .chart-container {
      width: 80%;
      max-width: 700px;
      margin: 30px auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
    }
    form {
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 15px;
    }
    input, select, button {
      padding: 8px;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 14px;
    }
    button {
      background: #36A2EB;
      color: white;
      border: none;
      cursor: pointer;
    }
    button:hover {
      background: #2b8ad6;
    }
    canvas {
      width: 100% !important;
      height: 350px !important;
    }

 nav ul {
  list-style: none;
  display: flex;
  gap: 1.5rem;
  justify-content: flex-end; /* moves nav items to the right */
}

nav a {
  text-decoration: none;
  color: #334155;
  font-weight: 600;
  padding: 0.45rem 0.75rem;
  border-radius: 8px;
  transition: color 0.18s ease, background 0.18s ease, transform 0.12s ease;
  font-size: 0.95rem;
}

nav a:hover {
  color: #ffffff;
  background: #2e7d32;
  transform: translateY(-6px);
}

nav a.active {
  background: linear-gradient(90deg,#2e7d32,#81c784);
  color: #fff;
}

/* Emotion detector styles */
.emotion-detector { display:flex; align-items:center; gap:0.6rem; margin: 1rem 0 }
.emotion-input { padding:0.65rem; border-radius:8px; border:1px solid rgba(46,125,50,0.08); min-width:220px }
.emotion-btn { padding:0.55rem 0.95rem; border-radius:8px; background:linear-gradient(90deg,#2e7d32,#4fb07a); color:#fff; border:none; cursor:pointer }
.emotion-btn:hover { transform:translateY(-2px) }
#result { margin-top:8px; color:#2e7d32; font-weight:600 }

/* Dark theme overrides */
[data-preferred-theme="dark"] body {
  background: linear-gradient(135deg,#071016,#0b1720);
  color: #d7e7e3;
}
[data-preferred-theme="dark"] .navbar {
  background: rgba(10,14,18,0.75);
  box-shadow: 0 2px 10px rgba(0,0,0,0.6);
}
[data-preferred-theme="dark"] .logo { color: #86e0b8 }
[data-preferred-theme="dark"] nav a { color: #cfeee0 }
[data-preferred-theme="dark"] nav a:hover { background: rgba(134,224,184,0.12); color: #fff }

  </style>




</head>
<body>

  <nav>
      <ul>
        <li><a href="index.html">Home</a></li>
        <li><a href="dashboard.html">Dashboard</a></li>
        <li><a href="journal.html">Journal</a></li>
        <li><a href="ai-insights.html">AI Insights</a></li>
        <li><a href="profile.html">Profile</a></li>
      </ul>
    </nav>
    

  <h1>ðŸŒ¿ Interactive Wellness Tracker</h1>

  <form id="dataForm">
    <label>
      Day:
      <select id="day">
        <option>Mon</option>
        <option>Tue</option>
        <option>Wed</option>
        <option>Thu</option>
        <option>Fri</option>
        <option>Sat</option>
        <option>Sun</option>
      </select>
    </label>
    <input type="number" id="sleep" placeholder="Sleep (hours)" step="0.1" min="0" />
    <input type="number" id="water" placeholder="Water (liters)" step="0.1" min="0" />
    <input type="number" id="mood" placeholder="Mood (1-5)" step="1" min="1" max="5" />
    <button type="submit">Add / Update</button>
  </form>

  <!-- Emotion detector (inline) -->
  <div style="display:flex;justify-content:center;">
    <div class="emotion-detector">
      <input id="inputText" class="emotion-input" type="text" placeholder="How are you feeling?">
      <button class="emotion-btn" onclick="predictEmotion()">Detect Emotion</button>
    </div>
  </div>

  <p id="result" style="text-align:center;margin-top:6px;color:#2e7d32;font-weight:600"></p>

  <div class="chart-container">
    <h2>ðŸ’¤ Sleep Hours</h2>
    <canvas id="sleepChart"></canvas>
  </div>

  <div class="chart-container">
    <h2>ðŸ’§ Water Intake</h2>
    <canvas id="waterChart"></canvas>
  </div>

  <div class="chart-container">
    <h2>ðŸ˜Š Mood Over Time</h2>
    <canvas id="moodChart"></canvas>
  </div>

  <script>
    const days = ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'];

    // Default data
    const sleepData = [0,0, 0,0, 0, 0, 0];
    const waterData =[0,0, 0,0, 0, 0, 0] ;
    const moodData  = [0,0, 0,0, 0, 0, 0];

    // Initialize charts
    const sleepChart = new Chart(document.getElementById('sleepChart'), {
      type: 'line',
      data: {
        labels: days,
        datasets: [{
          label: 'Hours of Sleep',
          data: sleepData,
          fill: true,
          borderColor: '#36A2EB',
          backgroundColor: 'rgba(54, 162, 235, 0.2)',
          tension: 0.4
        }]
      },
      options: { scales: { y: { beginAtZero: true, suggestedMax: 10 } } }
    });

    const waterChart = new Chart(document.getElementById('waterChart'), {
      type: 'bar',
      data: {
        labels: days,
        datasets: [{
          label: 'Water Intake (L)',
          data: waterData,
          backgroundColor: 'rgba(75, 192, 192, 0.6)',
          borderRadius: 6
        }]
      },
      options: { scales: { y: { beginAtZero: true, suggestedMax: 3 } } }
    });

    const moodChart = new Chart(document.getElementById('moodChart'), {
      type: 'line',
      data: {
        labels: days,
        datasets: [{
          label: 'Mood (1â€“5)',
          data: moodData,
          borderColor: '#FF6384',
          backgroundColor: 'rgba(255, 99, 132, 0.2)',
          tension: 0.4,
          fill: true
        }]
      },
      options: { scales: { y: { min: 1, max: 5 } } }
    });

    // Handle form submission
    document.getElementById('dataForm').addEventListener('submit', (e) => {
      e.preventDefault();

      const day = document.getElementById('day').value;
      const sleep = parseFloat(document.getElementById('sleep').value);
      const water = parseFloat(document.getElementById('water').value);
      const mood = parseInt(document.getElementById('mood').value);

      const index = days.indexOf(day);

      // Update data only if user entered something
      if (!isNaN(sleep)) sleepData[index] = sleep;
      if (!isNaN(water)) waterData[index] = water;
      if (!isNaN(mood)) moodData[index] = mood;

      // Update all charts
      sleepChart.update();
      waterChart.update();
      moodChart.update();

      // Clear inputs
      e.target.reset();
    });
  </script>

  <script>
    async function predictEmotion() {
      const userText = document.getElementById("inputText")?.value || '';
      const resultEl = document.getElementById("result");
      if (!userText || !userText.trim()) {
        if (resultEl) resultEl.innerText = 'Please enter text to analyze.';
        return;
      }
      if (resultEl) resultEl.innerText = 'Detecting...';

      try {
        const response = await fetch('http://127.0.0.1:5000/predict', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ text: userText })
        });

        if (!response.ok) {
          let err = 'Request failed';
          try { const j = await response.json(); if (j && j.error) err = j.error; } catch(e){}
          if (resultEl) resultEl.innerText = 'Error: ' + err;
          return;
        }

        const json = await response.json();
        const emotion = json?.emotion || json?.predicted_label || 'unknown';
        if (resultEl) resultEl.innerText = 'Emotion: ' + emotion;
      } catch (e) {
        if (resultEl) resultEl.innerText = 'Network error: ' + (e.message || e);
      }
    }
  </script>

  <script>
  (function(){
    const root = document.documentElement;
    const toggle = document.getElementById('theme-toggle');
    const stored = localStorage.getItem('preferred-theme');
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    const current = stored || (prefersDark ? 'dark' : 'light');
    root.setAttribute('data-preferred-theme', current);
    function updateToggle(){ if(!toggle) return; toggle.textContent = root.getAttribute('data-preferred-theme') === 'dark' ? 'ðŸŒ™' : 'â˜€'; toggle.classList.toggle('is-dark', root.getAttribute('data-preferred-theme') === 'dark'); }
    if(toggle){ toggle.addEventListener('click', ()=>{ const next = root.getAttribute('data-preferred-theme') === 'dark' ? 'light' : 'dark'; root.setAttribute('data-preferred-theme', next); localStorage.setItem('preferred-theme', next); updateToggle(); }); }
    updateToggle();
  })();
</script>

</body>
</html>